import discord
from discord.ext import commands
import json
import os

os.chdir("C:\\Users\\Luke\\Desktop\\Python VScode")

Bot_Name = "Bunger Bot"

Bot = commands.Bot(command_prefix="B#")
newPrefix = ""

def ChangePFM():
    PrefixFirstMessage = False

#Prefix saving?
@Bot.event
async def on_message(message):
    if message.author.name != Bot_Name: #and PrefixFirstMessage == False:

        await message.channel.send(f"{message.guild.id} Is the guild ID")
        await Check_Prefix(message.guild)

        guilds = get_prefix_data()
        guild = message.guild

        prefix = guilds[str(guild.id)]["Prefix"]
        await message.channel.send(f"{prefix} Is the current prefix")
        


async def Check_Prefix(guild):
    guilds = get_prefix_data()

    if str(guild.id) in guilds:
        return False
    else:
        guilds[str(guild.id)]["Prefix"] = "B#"

    with open("Data.json", "w",) as f:
        json.dump(guilds,f)
    return True

async def get_prefix_data():
     with open("Data.json", "r",) as f:
        guilds = json.load(f)


#Bot Print Ready
@Bot.event
async def on_ready():
    print("Bot Be The Do Ready")


#Secret amogus command
@Bot.command()
async def amogus(ctx):
    await ctx.send("Red sus.ðŸ˜³ Red suuuus.ðŸ˜³ I said red, sus, hahahahaha.ðŸ˜³ Why arent you laughing?ðŸ˜³ I just made a reference to the popular video game 'Among Us'! ðŸ˜³How can you not laugh at it? ðŸ˜³Emergeny meeting!ðŸ˜³ Guys, this here guy doesnt laugh at my funny Among Us memes! ðŸ˜³Lets beat him to death! Dead body reported! Skip! Skip! Vote blue!ðŸ˜³ Blue was not an impostorðŸ˜³. Among us in a nutshell hahahaha. ðŸ˜³What?! Youre still not laughing your ass off? I made SEVERAL funny references to Among Us and YOU STILL ARENT LAUGHING??!!! Bruh. Ya hear that? Wooooooosh. Whats woooosh? Oh, nothing. Just the sound of a joke flying over your head. Whats that? You think im annoying? Kinda sus, bro. Hahahaha! Anyway, yea, gotta go do tasks. Hahahaha! funny amogus ahha")
    # ChangePrefix


#Ping command
@Bot.command()
async def ping(ctx):
    await ctx.send(f'Current ping: {round(Bot.latency * 1000)}ms')


#GetUser test command
@Bot.command()
async def getuser(ctx):
    await ctx.send(f'User is {ctx.author}')


#Purge Command
@Bot.command()
async def purge(ctx, amount=0):
    if amount == None or amount == 0: #and :
        await ctx.send("Amount not recognized, please put a valid number.")
    elif amount != None and amount != 0:
        amount = amount + 1
        await ctx.channel.purge(limit=amount)

#Change Prefix command
@Bot.command(aliases=['newprefix', 'setprefix'])
async def changeprefix(ctx, *, usersPrefix):
    print(ctx, "IS THE CTX")
    Bot.command_prefix = usersPrefix
    await ctx.send(f'Prefix successfully changed \n New prefix is "{usersPrefix}"')
                #  newPrefix = input(message.channel.send('What is your new prefix? Say `none` to cancel'))
      

Bot.run('ODcxMTkyNDI2MjgxMzM2ODUy.YQXvLA.AVS0S_Zw4QSTP92jT1RdzruQWmQ')